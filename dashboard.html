<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard B2B Mobilis</title>
    <script>if (sessionStorage.getItem('dashboard_auth') !== 'true') window.location.href = 'index.html';</script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header class="header">
        <div class="logo">
            <div class="logo-icon">M</div>
            <div>
                <h1>PILOTAGE B2B</h1><span>Dashboard D√©cisionnel</span>
            </div>
        </div>
        <nav class="tabs">
            <button class="tab active" data-page="cockpit">üéõÔ∏è Cockpit</button>
            <button class="tab" data-page="territoire">üó∫Ô∏è Territoire</button>
            <button class="tab" data-page="coaching">üìä Coaching</button>
        </nav>
        <div class="filters">
            <div class="filter-group"><label>Mois</label><select id="monthFilter" multiple>
                    <option value="01" selected>Janvier</option>
                    <option value="02">F√©vrier</option>
                </select></div>
            <div class="filter-group"><label>Commercial</label><select id="commFilter">
                    <option value="all">Tous</option>
                </select></div>
        </div>
        <div class="header-right"><span id="currentDate"></span><button class="btn-logout"
                onclick="logout()">D√©connexion</button></div>
    </header>
    <main class="dashboard">
        <!-- PAGE 1: COCKPIT -->
        <section id="page-cockpit" class="page active">
            <h2 class="section-title">üéõÔ∏è Cockpit Op√©rationnel</h2>
            <div class="kpi-grid" id="kpiGrid"></div>
            <div class="grid-2">
                <div class="card">
                    <h3>‚≠ê Commercial Star du Mois</h3>
                    <div id="starCommercial"></div>
                </div>
                <div class="card">
                    <h3>üìä R√©partition CA</h3>
                    <div class="chart-box"><canvas id="caChart"></canvas></div>
                </div>
            </div>
            <div class="card">
                <h3>üë• √âquipe - Feux Tricolores</h3>
                <div class="table-wrap">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Commercial</th>
                                <th>Wilaya</th>
                                <th>Visites</th>
                                <th>Prosp.</th>
                                <th>CA R√©alis√©</th>
                                <th>% CA</th>
                                <th>% Prosp</th>
                                <th>Statut</th>
                            </tr>
                        </thead>
                        <tbody id="teamTable"></tbody>
                    </table>
                </div>
            </div>
        </section>
        <!-- PAGE 2: TERRITOIRE -->
        <section id="page-territoire" class="page">
            <h2 class="section-title">üó∫Ô∏è Strat√©gie Territoire & Grands Comptes</h2>
            <div class="grid-3">
                <div class="card card-2">
                    <h3>Carte Performance</h3>
                    <div id="mapBox"></div>
                </div>
                <div class="card">
                    <h3>üèÜ Top 5 Clients</h3>
                    <div id="topClients"></div>
                </div>
            </div>
            <div class="grid-2">
                <div class="card">
                    <h3>üì¶ Top Produits</h3>
                    <div id="topProduits"></div>
                </div>
                <div class="card">
                    <h3>CA par Wilaya</h3>
                    <div class="chart-box"><canvas id="wilayaChart"></canvas></div>
                </div>
            </div>
        </section>
        <!-- PAGE 3: COACHING -->
        <section id="page-coaching" class="page">
            <h2 class="section-title">üìä Matrice de Coaching</h2>
            <div class="grid-2">
                <div class="card">
                    <h3>Matrice Effort vs R√©sultat</h3>
                    <div class="chart-box"><canvas id="matriceChart"></canvas></div>
                </div>
                <div class="card">
                    <h3>üéØ Jauge Prospection</h3>
                    <div id="gaugeBox"></div>
                </div>
            </div>
            <div class="card">
                <h3>üìã Actions Coaching</h3>
                <div class="table-wrap">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Commercial</th>
                                <th>Zone</th>
                                <th>CA</th>
                                <th>Visites</th>
                                <th>Action Recommand√©e</th>
                            </tr>
                        </thead>
                        <tbody id="coachingTable"></tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>
    <script src="dashboard.js"></script>
</body>

</html>